:root{
  --violet-50:#f5f3ff;
  --violet-100:#ede9fe;
  --violet-200:#ddd6fe;
  --violet-400:#a78bfa;
  --violet-500:#8b5cf6;
  --violet-600:#7c3aed;
  --gray-50:#fafafa;
  --gray-100:#f5f5f5;
  --gray-200:#e5e7eb;
  --gray-300:#d1d5db;
  --gray-400:#9ca3af;
  --gray-500:#6b7280;
  --gray-600:#4b5563;
  --gray-700:#374151;
  --gray-800:#1f2937;
  --gray-900:#111827;
  --white:#fff;
  --r-sm:10px;
  --r-md:14px;
  --r-lg:18px;
  --r-xl:22px;
  --sh-sm:0 1px 2px rgba(0,0,0,.05);
  --sh-md:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);
  --sh-xl:0 20px 25px -5px rgba(0,0,0,.1),0 10px 10px -5px rgba(0,0,0,.04);
}

*{box-sizing:border-box;
  margin:0;
  padding:0
}

@keyframes fadeIn{from{
  opacity:0;
  transform:translateY(10px)
}to{
  opacity:1;
  transform:translateY(0)}
}

.habits-root{
  min-height:100vh;
  background:linear-gradient(135deg,#f5f3ff 0%,#faf5ff 50%,#f5f3ff 100%);
  padding:28px 0 40px;
  font-family:Inter, -apple-system, BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
  font-size:15px;
  line-height:1.6;
  color:var(--gray-800);
}
.habits-container{
  max-width:1100px;
  margin:0 auto;
  padding:0 40px;
  animation:fadeIn .35s ease-out}

/* Header */
.habits-header{
  display:flex;
  justify-content:space-between;
  align-items:flex-end;gap:16px;
  margin-bottom:20px;
  padding-bottom:14px;
  border-bottom:2px solid rgba(167,139,250,.2)}
.brand-title{
  font-size:clamp(28px,4vw,36px);
  font-weight:700;
  letter-spacing:-.02em;
  line-height:1.2;
  background:linear-gradient(135deg,#111827 0%,#7c3aed 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;margin:0 0 6px
}
.brand-sub{
  font-size:13.5px;
  color:var(--gray-600)
}
.add-top-btn{
  height:42px;
  display:inline-flex;
  align-items:center;
  gap:8px;
  border:none;
  border-radius:var(--r-md);
  padding:0 16px;
  background:linear-gradient(135deg,#7c3aed 0%,#8b5cf6 100%);
  color:#fff;
  font-weight:600;
  box-shadow:var(--sh-sm);
  cursor:pointer;
  transition:.18s transform,.18s box-shadow
}
.add-top-btn:hover{
  transform:translateY(-2px);
  box-shadow:var(--sh-md)}

/* Cards */
.card{
  background:#fff;
  border:1px solid rgba(124,58,237,.10);
  border-radius:var(--r-xl);
  padding:20px;
  box-shadow:var(--sh-md);
  margin-bottom:18px}
.card--violet{
  background:linear-gradient(135deg,#faf5ff 0%,#f5f3ff 100%);
  border-color:rgba(124,58,237,.15)}

/* Summary */
.summary{
  margin-bottom:16px
}
.summary-head{
  display:flex;
  justify-content:space-between;
  align-items:flex-start;
  gap:8px;
  margin-bottom:10px
}
.summary-title{
  font-size:18px;
  font-weight:700;
  color:var(--gray-900)
}
.summary-sub{
  font-size:14px;
  color:var(--gray-600)
}
.summary-rate{
  font-size:34px;
  font-weight:700;
  letter-spacing:-.02em;
  line-height:1;
  background:linear-gradient(135deg,#111827 0%,#7c3aed 100%);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text}
.progress{
  height:10px;
  background:var(--violet-100);
  border-radius:999px;
  overflow:hidden;
  margin-bottom:14px
}
.progress__bar{
  height:100%;
  background:linear-gradient(90deg,#7c3aed 0%,#8b5cf6 50%,#a78bfa 100%);
  border-radius:999px;
  transition:width .6s cubic-bezier(.4,0,.2,1)
}
.summary-stats{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:12px
}
.stat-card{
  background:#fff;
  border:1px solid rgba(124,58,237,.12);
  border-radius:var(--r-lg);
  padding:12px
}
.stat-head{
  display:flex;
  align-items:center;
  gap:8px;
  color:var(--gray-700);
  font-size:12px;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:.05em;
  margin-bottom:10px
}
.stat-value{
  font-size:24px;
  font-weight:700;
  color:var(--violet-600)
}

/* Filter bar */
.filterbar{
  margin-bottom:12px;
  padding:14px 16px;
  display:flex;
  flex-direction:column;
  gap:10px
}
.filter-section{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:10px
}
.filter-label{
  display:flex;
  align-items:center;
  gap:8px;
  color:var(--gray-900);
  font-size:16px;
  font-weight:600
}  /* same family/size as dropdown */
.filter-dropdowns{
  display:grid;
  grid-template-columns:repeat(3,minmax(0,1fr));
  gap:10px;
  flex:1
}

/* Dropdown: trigger and options unified */
.dd{
  position:relative;
  min-width:0
}
.dd-trigger{
  width:100%;
  height:44px;
  padding:0 40px 0 16px;
  background:#fff;
  color:var(--gray-900);
  border:1.5px solid var(--gray-300);
  border-radius:16px;
  display:flex;
  align-items:center;
  font-size:16px;
  font-weight:500;
  line-height:1.4;
  cursor:pointer;
  box-shadow:var(--sh-sm);
  transition:all .2s ease;
}
.dd-value{
  flex:1;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap
}
.dd-value.is-placeholder{
  color:var(--gray-500)
}
.dd-caret{
  position:absolute;
  right:14px;
  top:50%;
  transform:translateY(-50%);
  color:var(--violet-600);
  pointer-events:none;
  transition:transform .2s ease
}
.dd[data-open="true"]
.dd-caret{transform:translateY(-50%) rotate(-180deg)}
.dd-trigger:hover{
  border-color:var(--violet-400);
  box-shadow:0 0 0 3px rgba(167,139,250,.12)
}
.dd[data-open="true"]
.dd-trigger{
  border-color:var(--violet-500);
  box-shadow:0 0 0 3px rgba(139,92,246,.16)
}

.dd-pop{
  position:absolute;
  top:calc(100% + 8px);
  left:0;
  right:0;
  z-index:140;
  background:#fff;
  border:1px solid rgba(124,58,237,.15);
  border-radius:18px;
  box-shadow:var(--sh-xl);
  overflow:hidden
}
.dd-list{
  max-height:280px;
  overflow-y:auto;
  padding:8px;
  list-style:none
}
.dd-item{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 16px;
  border-radius:12px;
  cursor:pointer;
  color:var(--gray-900);
  font-size:16px;
  font-weight:500;
  line-height:1.4;
  transition:all .15s ease;
}
.dd-item:hover{
  background:var(--violet-50);
  color:#5b21b6
}
.dd-item.is-active{
  background:var(--violet-100);
  color:#5b21b6
}
.add-dd .dd-trigger{
  background:#fafaff;
  border-color:rgba(124,58,237,.2)
}

/* Groups */
.group{display:block}
.group-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0;
  margin:14px 0 10px;
  border:0;
  background:transparent;
  box-shadow:none;
  border-radius:0
}
.group-title{
  font-size:18px;
  font-weight:700;
  color:var(--gray-900);
  text-transform:capitalize
}
.group-count{
  font-size:14px;
  font-weight:600;
  color:var(--gray-900)
}
.group-list{
  display:grid;
  gap:16px
}

/* Habit card */
.card.habit-card{
  border-left:4px solid var(--violet-500)
}
.habit-main{
  display:flex;
  flex-direction:column;
  gap:16px
}
.habit-check-section{
  display:flex;
  align-items:center;
  gap:10px
}
.checkbox{
  width:24px;
  height:24px;
  accent-color:var(--violet-600);
  cursor:pointer
}
.habit-name{
  font-size:16.5px;
  font-weight:600;
  color:var(--gray-900);
  cursor:pointer
}
.habit-name.is-done{
  color:var(--gray-500);
  opacity:.7;
  text-decoration:line-through
}

.habit-meta{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:14px
}
.habit-tags{
  display:flex;
  gap:8px;
  flex-wrap:wrap
}
.chip{
  padding:6px 14px;
  border-radius:999px;
  font-size:13px;
  font-weight:700;
  border:1.5px solid;
  text-transform:lowercase
}
.chip.general{
  background:#dbeafe;
  color:#1e40af;
  border-color:#93c5fd
}
.chip.study{
  background:#e0f2fe;
  color:#0369a1;
  border-color:#7dd3fc
}
.chip.health{
  background:#dcfce7;
  color:#15803d;
  border-color:#86efac
}
.chip.mind{
  background:#ede9fe;
  color:#5b21b6;
  border-color:#c4b5fd
}
.chip-daily{
  background:#fef3c7;
  color:#92400e;
  border-color:#fde68a
}

.habit-stats{
  display:flex;
  gap:18px;
  align-items:center;
  margin-left:auto
}
.stat-item{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:13.5px
}
.stat-label{
  color:var(--gray-700);
  font-weight:600
}
.streak,.best-streak{font-weight:600}
.streak{color:#ea580c}
.best-streak{color:var(--violet-600)}

.habit-actions{
  display:flex;
  align-items:center;
  gap:8px;
  margin-left:auto
}
.btn-edit{
  background:#fff;
  border:1px solid var(--violet-200);
  color:#6d28d9;
  border-radius:10px;
  padding:6px 8px;
  cursor:pointer
}
.btn-edit:hover{
  background:var(--violet-50)
}
.btn-delete{
  background:transparent;
  border:1px solid transparent;
  color:var(--gray-500);
  border-radius:10px;
  padding:8px;
  cursor:pointer
}
.btn-delete:hover{
  background:rgba(239,68,68,.08);
  color:#dc2626;
  border-color:rgba(239,68,68,.2)}

/* Week row (no label) */
.habit-week{
  padding-top:12px;
  border-top:1px solid rgba(124,58,237,.10)
}
.week-days{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  width:100%
}
.week-day{
  width:56px;
  height:48px;
  border-radius:12px;
  border:2px solid #e7ddff;
  background:#fff;
  color:var(--gray-700);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:4px;
  font-weight:500;
  letter-spacing:.02em;
  box-shadow:0 1px 2px rgba(0,0,0,.04);
  transition:transform .15s ease, box-shadow .15s ease, background-color .15s ease;
}
.week-day-letter{
  font-size:16px;
  line-height:1
}
.week-day-label{
  font-size:11px;
  line-height:1;
  color:var(--gray-500)
}
.week-day.is-done{
  border-color:transparent;
  background:linear-gradient(180deg,#7c3aed,#8b5cf6);
  color:#fff;
  box-shadow:0 8px 18px rgba(124,58,237,.22)}
.week-day.is-done .week-day-label{color:rgba(255,255,255,.95)}
.week-day:hover{
  transform:translateY(-1px);
  box-shadow:0 6px 14px rgba(124,58,237,.12)
}

/* Modal */
.modal-backdrop{
  position:fixed;
  inset:0;
  background:rgba(31,10,69,.45);
  backdrop-filter:blur(6px);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:100}
.modal{
  background:#fff;
  border-radius:var(--r-xl);
  box-shadow:var(--sh-xl);
  width:min(480px,92vw);
  position:relative;
  z-index:120;
  overflow:visible
}
.modal-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:18px 22px;
  border-bottom:1px solid var(--violet-100)
}
.modal-header h3{
  font-size:20px;
  font-weight:800;
  color:#6d28d9
}
.modal-close{
  background:transparent;
  border:none;
  color:var(--gray-500);
  cursor:pointer
}
.modal-body{
  padding:18px 22px;
  display:flex;
  flex-direction:column;
  gap:12px
}
.modal-footer{
  display:flex;
  justify-content:flex-end;
  gap:10px;
  padding:14px 22px;
  border-top:1px solid var(--violet-100)
}

.input{
  height:44px;
  border-radius:16px;
  border:1.5px solid var(--gray-300);
  background:#fff;
  padding:0 16px;
  font-size:16px;
  font-weight:500;
  color:var(--gray-900);
  outline:none;
  transition:all .2s ease
}
.input::placeholder{
  color:var(--gray-400)
}
.input:focus{
  border-color:var(--violet-500);
  box-shadow:0 0 0 3px rgba(139,92,246,.12)
}

.btn{
  height:44px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;border:none;
  border-radius:16px;
  padding:0 20px;
  background:linear-gradient(135deg,#7c3aed 0%,#8b5cf6 100%);
  color:#fff;
  font-size:14px;
  font-weight:700;
  cursor:pointer;
  box-shadow:var(--sh-sm);
  transition:all .2s cubic-bezier(.4,0,.2,1)}
.btn:hover{
  transform:translateY(-2px);
  box-shadow:var(--sh-md);
  background:linear-gradient(135deg,#6d28d9 0%,#7c3aed 100%)}
.btn.secondary{
  background:#fff;
  color:#6d28d9;
  border:1.5px solid var(--violet-200)
}

/* Responsive */
@media (max-width:960px){
  .filter-dropdowns{
    grid-template-columns:1fr
  }
}
@media (max-width:768px){
  .habits-root{
    padding:18px 0 28px
  }
  .habits-container{
    padding:0 16px}

  .filter-section{
    flex-direction:column;
    align-items:stretch;
    gap:8px
  }
  .group-list{
    gap:12px
  }
  .habit-meta{
    flex-direction:column;
    align-items:flex-start;
    gap:10px
  }
  .habit-stats{
    margin-left:0
  }
  .week-days{
    gap:8px
  }
  .week-day{
    width:48px;
    height:44px;
    border-radius:10px
  }
  .week-day-letter{
    font-size:14px
  }
}

/* Print */
@media print{
  .habits-root{
    background:#fff
  }
  .btn-delete,.checkbox,.btn-edit,.add-top-btn{display:none}
  .card{
    box-shadow:none;
    border:1px solid #ddd
  }
}